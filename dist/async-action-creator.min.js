!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t["async-action-creator"]={})}(this,function(t){"use strict";var d="@@actionCreator";function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=function(t){return t.slice(t.lastIndexOf("_")+1)};t.createAction=function(n){return{run:function(t){return{type:n,payload:t}},start:function(t){return{type:"".concat(n,"_STARTED"),payload:t}},cancel:function(t){return{type:"".concat(n,"_CANCELED"),payload:t}},resolve:function(t){return{type:"".concat(n,"_RESOLVED"),payload:t}},reject:function(t){return{type:"".concat(n,"_REJECTED"),payload:t}},getStatus:function(t){var e=t[d];return e[n]?e[n].status:"init"},getError:function(t){var e=t[d];return e[n]?e[n].error:void 0},getResponse:function(t){var e=t[d];return e[n]?e[n].response:void 0},clearStatus:function(){return{type:"".concat(d,"/CLEAR_STATUS"),namespace:n}},TYPE:n,STARTED:"".concat(n,"_STARTED"),CANCELED:"".concat(n,"_CANCELED"),RESOLVED:"".concat(n,"_RESOLVED"),REJECTED:"".concat(n,"_REJECTED")}},t.reducer=function(){var t,e,n,r,o,c,a,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},u=1<arguments.length?arguments[1]:void 0;if(a=u.type,0<=["STARTED","RESOLVED","REJECTED","CANCELED"].indexOf(p(a))){var s=(c=u.type,{type:(o=c,o.slice(0,o.lastIndexOf("_"))),status:p(c)}),E=s.type,f=s.status;return Object.assign({},i,l({},E,{status:function(t){switch(t){case"STARTED":return"pending";case"CANCELED":return"canceled";case"RESOLVED":return"resolved";case"REJECTED":return"rejected";default:return"init"}}(f),error:"REJECTED"===f?(n=u,r=n.payload,r||void 0):void 0,response:"RESOLVED"===f?(t=u,e=t.payload,e||void 0):void 0}))}return u.type==="".concat(d,"/CLEAR_STATUS")?Object.assign({},i,l({},u.namespace,void 0)):i},t.middleware=function(p){return function(d){return function(f){return function(t){if(!p)throw new Error("No services were passed to the async-action-creator middleware, you have to pass an object like:\n      {\n        [string]: {\n          uri: string|Function,\n          method: string,\n          selector?: Function,\n          options?: Object|Function\n        }\n      }\n  ");if(!d||!f||!t)throw new Error("Redux data (store, next or action) is missing, it looks like a configuration problem, take a look and try again");var e,n,r=t.type,o=t.payload,c=p[r];if(c){var a=c.uri,i=c.method,u=c.selector,s=c.options,E=void 0===s?{}:s;return f(t),d.dispatch({type:"".concat(r,"_STARTED")}),fetch((e=a,n=o,"function"==typeof e?e(n):e),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){l(e,t,n[t])})}return e}({},E,{method:i})).then(function(t){return t.json()}).then(function(t){return u?u(t):t}).then(function(t){return d.dispatch({type:"".concat(r,"_RESOLVED"),payload:t})}).catch(function(t){return d.dispatch({type:"".concat(r,"_REJECTED"),payload:t})})}return f(t)}}}},t.REDUCER_NAME=d,Object.defineProperty(t,"__esModule",{value:!0})});
