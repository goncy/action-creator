!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t["async-action-creator"]={})}(this,function(t){"use strict";var p="@@actionCreator";function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d=function(t){return t.slice(t.lastIndexOf("_")+1)};t.createAction=function(n){return{run:function(t){return{type:n,payload:t}},fetch:function(t){return{type:"".concat(n,"_FETCH"),payload:t}},update:function(t){return{type:"".concat(n,"_UPDATE"),payload:t}},create:function(t){return{type:"".concat(n,"_CREATE"),payload:t}},remove:function(t){return{type:"".concat(n,"_REMOVE"),payload:t}},start:function(t){return{type:"".concat(n,"_STARTED"),payload:t}},resolve:function(t){return{type:"".concat(n,"_RESOLVED"),payload:t}},reject:function(t){return{type:"".concat(n,"_REJECTED"),payload:t}},getStatus:function(t){var e=t[p];return e[n]?e[n].status:"init"},getError:function(t){var e=t[p];return e[n]?e[n].error:void 0},getResponse:function(t){var e=t[p];return e[n]?e[n].response:void 0},clearStatus:function(){return{type:"".concat(p,"/CLEAR_STATUS"),namespace:n}},TYPE:n,FETCH:"".concat(n,"_FETCH"),UPDATE:"".concat(n,"_UPDATE"),CREATE:"".concat(n,"_CREATE"),REMOVE:"".concat(n,"_REMOVE"),STARTED:"".concat(n,"_STARTED"),RESOLVED:"".concat(n,"_RESOLVED"),REJECTED:"".concat(n,"_REJECTED")}},t.reducer=function(){var t,e,n,r,o,c,a,i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},u=1<arguments.length?arguments[1]:void 0;if(a=u.type,0<=["STARTED","RESOLVED","REJECTED"].indexOf(d(a))){var s=(c=u.type,{type:(o=c,o.slice(0,o.lastIndexOf("_"))),status:d(c)}),E=s.type,f=s.status;return Object.assign({},i,v({},E,{status:function(t){switch(t){case"STARTED":return"pending";case"RESOLVED":return"resolved";case"REJECTED":return"rejected";default:return"init"}}(f),error:"REJECTED"===f?(n=u,r=n.payload,r||void 0):void 0,response:"RESOLVED"===f?(t=u,e=t.payload,e||void 0):void 0}))}return u.type==="".concat(p,"/CLEAR_STATUS")?Object.assign({},i,v({},u.namespace,void 0)):i},t.middleware=function(y){return function(l){return function(d){return function(t){if(!y)throw new Error("No services were passed to the async-action-creator middleware, you have to pass an object like:\n      {\n        [string]: {\n          uri: string|Function,\n          method: string,\n          selector?: Function,\n          options?: Object|Function\n        }\n      }\n  ");if(!l||!d||!t)throw new Error("Redux data (store, next or action) is missing, it looks like a configuration problem, take a look and try again");var e=t.type,n=t.payload,r=y[e];if(d(t),r){var o=r.uri,c=r.method,a=r.selector,i=r.action,u=r.options,s=void 0===u?{}:u,E=r.start,f=void 0===E||E,p=l.getState();if(!i)throw new Error("The matched service doesn't receive an 'action' property");return f&&l.dispatch(i.start()),fetch(function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,n):t}(o,n,p),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}({},s,{method:c})).then(function(t){if(200<=t.status&&t.status<300)return t;var e=new Error(t.statusText);throw e.response=t,e}).then(function(t){return t.json()}).then(function(t){return a?a(t,p):t}).then(function(t){return l.dispatch(i.resolve(t))}).catch(function(t){return l.dispatch(i.reject(t))})}}}}},t.REDUCER_NAME=p,Object.defineProperty(t,"__esModule",{value:!0})});
